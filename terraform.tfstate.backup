{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 27,
  "lineage": "f2edd7f1-4581-4ca2-3f66-3357acd19e7e",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "scaleway_iam_user",
      "name": "jonathan",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "email": "jonathan@scopopop.com",
            "id": "0d806077-2ff6-45c0-9b5b-2c83f1da9b64",
            "organization_id": "",
            "user_id": "0d806077-2ff6-45c0-9b5b-2c83f1da9b64"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "scaleway_iam_user",
      "name": "julien",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "email": "castets.j@gmail.com",
            "id": "f64e3ebd-9241-42ab-9716-7cd5b2cb9246",
            "organization_id": "",
            "user_id": "f64e3ebd-9241-42ab-9716-7cd5b2cb9246"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_api_key",
      "name": "infra-ci",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_key": "SCWYDDZ3Z48CMMZRG6M3",
            "application_id": "c4af8990-4cdc-4dc0-a676-052f7e9e22db",
            "created_at": "2024-06-07T18:08:44Z",
            "creation_ip": "31.30.163.244",
            "default_project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "description": "Store infra images in the container registry. Used by https://github.com/mesadsfr/infra",
            "editable": true,
            "expires_at": "",
            "id": "SCWYDDZ3Z48CMMZRG6M3",
            "secret_key": null,
            "updated_at": "2024-06-07T18:08:44Z",
            "user_id": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_iam_application.infra-ci"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_api_key",
      "name": "s3-store-backups",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_key": "SCWYWDTANXC5RTH5MVYH",
            "application_id": "3f40f91e-75f8-451d-b552-5a6ded3e50ff",
            "created_at": "2024-06-07T16:42:00Z",
            "creation_ip": "31.30.163.244",
            "default_project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "description": "",
            "editable": true,
            "expires_at": "",
            "id": "SCWYWDTANXC5RTH5MVYH",
            "secret_key": null,
            "updated_at": "2024-06-07T16:42:00Z",
            "user_id": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_iam_application.s3-store-backups"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_api_key",
      "name": "terraform",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_key": "SCW0QD3G9YWVE3K3H376",
            "application_id": "d4b467f5-dc8a-4ee2-aad4-aed64186ec32",
            "created_at": "2024-06-21T09:43:13Z",
            "creation_ip": "78.196.239.228",
            "default_project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "description": "Key to setup and update the Scaleway infrastructure for mesads",
            "editable": true,
            "expires_at": "",
            "id": "SCW0QD3G9YWVE3K3H376",
            "secret_key": null,
            "updated_at": "2024-06-21T09:43:13Z",
            "user_id": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_iam_application.terraform"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_application",
      "name": "infra-ci",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-06-07T18:04:26Z",
            "description": "Token used by the CI to push docker images to the registry",
            "editable": true,
            "id": "c4af8990-4cdc-4dc0-a676-052f7e9e22db",
            "name": "infra-ci",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "tags": [],
            "updated_at": "2024-06-07T18:04:26Z"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_application",
      "name": "s3-store-backups",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-06-07T16:40:41Z",
            "description": "Used by https://github.com/mesadsfr/infra to store db and s3 backups to S3",
            "editable": true,
            "id": "3f40f91e-75f8-451d-b552-5a6ded3e50ff",
            "name": "s3-store-backups",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "tags": [],
            "updated_at": "2024-06-07T16:40:41Z"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_application",
      "name": "terraform",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "created_at": "2024-06-21T09:42:37Z",
            "description": "Generate scaleway resources with terraform",
            "editable": true,
            "id": "d4b467f5-dc8a-4ee2-aad4-aed64186ec32",
            "name": "terraform",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "tags": [],
            "updated_at": "2024-06-21T10:43:16Z"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_group",
      "name": "administrators",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_ids": [
              "d4b467f5-dc8a-4ee2-aad4-aed64186ec32"
            ],
            "created_at": "2024-06-07T13:28:18Z",
            "description": "",
            "external_membership": null,
            "id": "a202888c-cdf9-41cf-8e83-ad27efd2cbe5",
            "name": "Administrators",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "tags": [],
            "updated_at": "2024-06-07T13:28:18Z",
            "user_ids": [
              "f64e3ebd-9241-42ab-9716-7cd5b2cb9246"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "data.scaleway_iam_user.julien",
            "scaleway_iam_application.terraform"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_group",
      "name": "billing-administrators",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_ids": [],
            "created_at": "2024-06-07T13:28:18Z",
            "description": "",
            "external_membership": null,
            "id": "707712ad-4de1-4387-a4b7-6e88b7af0089",
            "name": "Billing Administrators",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "tags": [],
            "updated_at": "2024-06-07T13:28:18Z",
            "user_ids": [
              "0d806077-2ff6-45c0-9b5b-2c83f1da9b64"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "data.scaleway_iam_user.jonathan"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_policy",
      "name": "push-docker-images-to-registry",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_id": "c4af8990-4cdc-4dc0-a676-052f7e9e22db",
            "created_at": "2024-06-07T18:05:20Z",
            "description": "",
            "editable": true,
            "group_id": null,
            "id": "1b0d6ac0-10d4-41b9-b8cc-5c266eace2c2",
            "name": "Push images to container registry",
            "no_principal": false,
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "rule": [
              {
                "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
                "permission_set_names": [
                  "ContainerRegistryFullAccess"
                ],
                "project_ids": []
              }
            ],
            "tags": [],
            "updated_at": "2024-06-07T18:05:20Z",
            "user_id": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_iam_application.infra-ci"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_iam_policy",
      "name": "store_backups",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_id": "3f40f91e-75f8-451d-b552-5a6ded3e50ff",
            "created_at": "2024-06-07T17:16:38Z",
            "description": "",
            "editable": true,
            "group_id": null,
            "id": "ca34760f-71de-4d0a-a687-7eec20cf38e0",
            "name": "Store backups",
            "no_principal": false,
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "rule": [
              {
                "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
                "permission_set_names": [
                  "ObjectStorageBucketsRead",
                  "ObjectStorageObjectsRead",
                  "ObjectStorageObjectsWrite"
                ],
                "project_ids": []
              }
            ],
            "tags": [],
            "updated_at": "2024-06-07T18:06:31Z",
            "user_id": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "rule"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "organization_id"
              }
            ]
          ],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_iam_application.s3-store-backups"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_job_definition",
      "name": "backup-db",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "command": "",
            "cpu_limit": 1120,
            "cron": [
              {
                "schedule": "0 1,13 * * *",
                "timezone": "Europe/Paris"
              }
            ],
            "description": "Backup MesADS PostgreSQL database",
            "env": {
              "AWS_ACCESS_KEY_ID": "SCWYWDTANXC5RTH5MVYH",
              "AWS_SECRET_ACCESS_KEY": "2da3ac22-c25f-4ba9-bf5a-b4913f144179",
              "PGDATABASE": "b8apkaewft3hymvn8c1a",
              "PGHOST": "b8apkaewft3hymvn8c1a-postgresql.services.clever-cloud.com",
              "PGPASSWORD": "eijyc1GidR2Di5Xd8LKc",
              "PGPORT": "5965",
              "PGUSER": "u7nibkwvoaihtonuowig",
              "S3_PATH": "s3://mesads-backups/database/"
            },
            "id": "fr-par/9bfcf1d3-5ed0-4f95-9c40-3aa99802d22e",
            "image_uri": "rg.fr-par.scw.cloud/mesads/backup-db:latest",
            "memory_limit": 2048,
            "name": "mesads-backup-db",
            "project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "region": "fr-par",
            "timeout": "5m0s"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "AWS_ACCESS_KEY_ID",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "AWS_SECRET_ACCESS_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "PGDATABASE",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "PGHOST",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "PGPASSWORD",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "PGPORT",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "PGUSER",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "S3_PATH",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_job_definition",
      "name": "backup-s3",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "command": "",
            "cpu_limit": 280,
            "cron": [
              {
                "schedule": "0 2,14 * * *",
                "timezone": "Europe/Paris"
              }
            ],
            "description": "Backup MesADS S3 bucket",
            "env": {
              "CC_ACCESS_KEY_ID": "QE1D7DH5YQZU5DO20N5K",
              "CC_SECRET_ACCESS_KEY": "kRw7cR73iYMBQrp1MqBeJkh0Bu9WOwwnT4wtUqix",
              "SCW_ACCESS_KEY_ID": "SCWYWDTANXC5RTH5MVYH",
              "SCW_SECRET_ACCESS_KEY": "2da3ac22-c25f-4ba9-bf5a-b4913f144179"
            },
            "id": "fr-par/18533a9d-605b-481e-b1ea-3455d1896384",
            "image_uri": "rg.fr-par.scw.cloud/mesads/backup-s3:latest",
            "memory_limit": 512,
            "name": "mesads-backup-s3",
            "project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "region": "fr-par",
            "timeout": "10m0s"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "CC_ACCESS_KEY_ID",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "CC_SECRET_ACCESS_KEY",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "SCW_ACCESS_KEY_ID",
                  "type": "string"
                }
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "env"
              },
              {
                "type": "index",
                "value": {
                  "value": "SCW_SECRET_ACCESS_KEY",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_object_bucket",
      "name": "mesads-backups",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl": "private",
            "api_endpoint": "https://s3.fr-par.scw.cloud",
            "cors_rule": [],
            "endpoint": "https://mesads-backups.s3.fr-par.scw.cloud",
            "force_destroy": false,
            "id": "fr-par/mesads-backups",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [
                  {
                    "days": 30
                  }
                ],
                "id": "remove-old-files",
                "prefix": "database/",
                "tags": {},
                "transition": []
              }
            ],
            "name": "mesads-backups",
            "object_lock_enabled": false,
            "project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "region": "fr-par",
            "tags": {},
            "timeouts": null,
            "versioning": [
              {
                "enabled": false
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlZmF1bHQiOjYwMDAwMDAwMDAwMCwiZGVsZXRlIjo2MDAwMDAwMDAwMDAsInJlYWQiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_object_bucket_acl",
      "name": "mesads-backups",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_control_policy": [
              {
                "grant": [
                  {
                    "grantee": [
                      {
                        "display_name": "0292762e-99e9-4ac6-a64a-17337d698723",
                        "id": "0292762e-99e9-4ac6-a64a-17337d698723",
                        "type": "CanonicalUser"
                      }
                    ],
                    "permission": "FULL_CONTROL"
                  }
                ],
                "owner": [
                  {
                    "display_name": "0292762e-99e9-4ac6-a64a-17337d698723",
                    "id": "0292762e-99e9-4ac6-a64a-17337d698723"
                  }
                ]
              }
            ],
            "acl": "private",
            "bucket": "mesads-backups",
            "expected_bucket_owner": "",
            "id": "fr-par/mesads-backups/private",
            "project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "region": "fr-par"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjAifQ==",
          "dependencies": [
            "scaleway_object_bucket.mesads-backups"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "scaleway_registry_namespace",
      "name": "mesads",
      "provider": "provider[\"registry.terraform.io/scaleway/scaleway\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "",
            "endpoint": "rg.fr-par.scw.cloud/mesads",
            "id": "fr-par/4ac69927-beea-4efe-b7a9-486c13e74e7f",
            "is_public": false,
            "name": "mesads",
            "organization_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "project_id": "0292762e-99e9-4ac6-a64a-17337d698723",
            "region": "fr-par",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlZmF1bHQiOjMwMDAwMDAwMDAwMCwiZGVsZXRlIjozMDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjAifQ=="
        }
      ]
    }
  ],
  "check_results": null
}
